macro field($i id, $t dt) = {
	{{i}} {{t}};
};

macro fn($i id, $param tks, $x expr) = {
	fun {{i}}({{param}}) = {{x}} end
};

fn!(add, ${x, y}, x + y); // fun add(x, y) = x + y end
fn!(sub, ${x, y}, x - y); // fun sub(x, y) = x - y end

type Person record =
	field!(age, Uint8);
	field!(name, Str);
	field!(work, Str);
end

macro variant($i id, $t dt) = {
	{{i}}:{{t}};
};

type Color enum =
	variant!(Red, Int32);
	variant!(Green, Int32);
	variant!(Blue, Int32);
end

object Person record =
	field!(age, Uint8);
	field!(name, Str);
end
